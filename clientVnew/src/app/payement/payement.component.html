
<mdb-card>
    <mdb-card-header>
      <div class="row">
        <app-breadcrumbs [url]="'eleves'"></app-breadcrumbs> <div style="text-align: center;width: 100%;">
          <h3>Payements</h3>
        </div>
      </div>
    </mdb-card-header>
    <mdb-card-body>
      <mdb-card-text>
        <div class="row" style="margin-bottom:50px">
          <div class="col-4 form-align-v">
            <h3>{{eleve.nom}} {{eleve.prenom}}</h3>
            <span *ngIf="eleve.adresse">{{eleve.adresse.numero}}
                <span *ngIf="eleve.adresse">, {{eleve.adresse.rue}}</span>
                <span *ngIf="eleve.adresse">, #{{eleve.adresse.appartement}}</span>
                <span *ngIf="eleve.adresse">, {{eleve.adresse.code_postal}}</span>
                <span *ngIf="eleve.adresse">, {{eleve.adresse.municipalite}}, {{eleve.adresse.province}}</span>
            </span>

            <span *ngIf="eleve.coordonnee" ><i class="fas fa-phone"></i> : {{eleve.coordonnee.telephone}}</span>
          </div>
          <div class="offset-3 col-3 form-align-v flex-end">
              <span>Coût de la formation :</span>
              <span>Total payé :</span>
            </div>
          <div class="col-2 form-align-v">
            <span>{{eleve.frais_inscription | currency}}</span>
            <span>{{totalPaye | currency}}</span>
          </div>
        </div>
        <mat-accordion>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Ajouter un payement
                </mat-panel-title>
              </mat-expansion-panel-header>
<form #formulaire="ngForm">
  <div class="row">
      <div class="form-align-v col col-lg-3">
          <label for="province" class="requis">Type de payement</label>
          <mat-form-field>
              <mat-label>Type de payement</mat-label>
              <select matNativeControl  name="province" [(ngModel)]="payement.type" required>
            <option *ngFor="let type of types" [value]="type.value">{{type.label}}</option>
              </select>
            </mat-form-field>
      </div>
    <div class="form-align-v col col-lg-3  none-border-top">
      <label for="montant" class="requis">Montant à payer</label>
      <mat-form-field>
          <input matInput type="number" class="example-right-align"
           name="montant" [(ngModel)]="payement.montant" placeholder="montant" required>
          <span matPrefix>$&nbsp;</span>
          <span matSuffix>.00</span>
      </mat-form-field>
      </div>
      <div class="col col-lg-3  none-border-top form-align-v">
          <label for="datePayement" class="requis">Date de payement</label>
                <mat-form-field floatLabel="never">
                    <input matInput  [matDatepicker]="picker"
                    name="datePayement" [(ngModel)]="payement.date_payement"
                     placeholder="yyyy-mm-dd" required>
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                  </mat-form-field>
      </div>
      <div class="col col-lg-3 el-align-centre flex-container-btn">
          <button type="button"
          class="btn bg-color-green size-btn-m"
           (click)="enregistrer()"
           style="margin-right:10px;" [disabled]="!formulaire.valid">
              <i class="fas fa-save"></i>&nbsp;{{'label.enregistrer' | translate}}
            </button>
      </div>
  </div>
</form>
</mat-expansion-panel>
</mat-accordion>
<div class="row">
    <div class="col col-12 flex-container-btn">
        <button type="button"
        class="btn bg-color-green size-btn-m"  data-toggle="modal" data-target="#factureModal" (click)="genererFacture()"
         style="margin:20px 0px;" [disabled]="!selection.selected.length">
            <i class="fas fa-save"></i>&nbsp;Génèrer
          </button>
    </div>
</div>
<table width="100%" mat-table [dataSource]="dataSource" class="mat-elevation-z8">
  <!-- Item Column -->
  <ng-container matColumnDef="type">
    <th mat-header-cell *matHeaderCellDef> Type de payement</th>
    <td mat-cell *matCellDef="let transaction" data-label="type"> {{transaction.type}} </td>
    <!-- <td mat-footer-cell *matFooterCellDef> Total </td> -->
  </ng-container>
<!-- Cost Column -->
<ng-container matColumnDef="date_payement">
    <th mat-header-cell *matHeaderCellDef> Date du payement </th>
    <td mat-cell *matCellDef="let transaction" data-label="Date"> {{transaction.date_payement | date:'yyyy-MM-dd'}} </td>
    <!-- <td mat-footer-cell *matFooterCellDef> </td> -->
  </ng-container>
  <!-- Cost Column -->
  <ng-container matColumnDef="montant">
    <th mat-header-cell *matHeaderCellDef> Montant </th>
    <td mat-cell *matCellDef="let transaction" data-label="Montant"> {{transaction.montant | currency}} </td>
    <!-- <td mat-footer-cell *matFooterCellDef> {{getTotalCost() | currency}} </td> -->
  </ng-container>
   <!-- Checkbox Column -->
   <ng-container matColumnDef="choix">
      <th mat-header-cell *matHeaderCellDef>
        <mat-checkbox (change)="$event ? masterToggle() : null"
                      [checked]="selection.hasValue() && isAllSelected()"
                      [indeterminate]="selection.hasValue() && !isAllSelected()"
                      [aria-label]="checkboxLabel()">
        </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row" data-label="Action">
        <mat-checkbox (click)="clickSelect($event)"
                      (change)="$event ? selection.toggle(row) : null"
                      [checked]="selection.isSelected(row)"
                      [aria-label]="checkboxLabel(row)">
        </mat-checkbox>
      </td>
    </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)"></tr>
  <!-- <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr> -->
</table>
</mdb-card-text>
</mdb-card-body>
</mdb-card>

<!-- <app-gabarit-facture [eleve]="eleve" [ecole]="ecole" [payementsPDF]="selection.selected" [totalPaye]="totalPaye"
  [eventClickGenerer]="actionGenerer"></app-gabarit-facture> -->
